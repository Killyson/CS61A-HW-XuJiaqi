## ![img](https://cnchen2000.oss-cn-shanghai.aliyuncs.com/img/logo.png)      è®¡ç®—æœºä¸äººå·¥æ™ºèƒ½å­¦é™¢ã€Šäººå·¥æ™ºèƒ½åŸºç¡€ç¼–ç¨‹å®è®­ã€‹å®éªŒæŠ¥å‘ŠğŸ“

| ä¸“ä¸š                 | å­¦å·         | å§“å         |
| :------------------- | ------------ | ------------ |
| æ•°æ®ç§‘å­¦ä¸å¤§æ•°æ®æŠ€æœ¯ | 2304300107   | é’±è¾°         |
| **è¯¾ç¨‹åç§°**         | **å®éªŒåç§°** | **å®Œæˆæ—¥æœŸ** |
| äººå·¥æ™ºèƒ½åŸºç¡€ç¼–ç¨‹å®è®­ | å¤§ä½œä¸š       | 2025.1.1     |



[TOC]

### ä¸€ å®éªŒç›®æ ‡

- æŒæ¡Vs Codeã€githubçš„ä½¿ç”¨ï¼›
- æŒæ¡ä½¿ç”¨Makefileè¿›è¡Œå·¥ç¨‹ç¼–è¯‘çš„æ–¹æ³•ï¼›

  

### äºŒ å®éªŒè¦æ±‚

- ä¸ªäººç‹¬ç«‹å®Œæˆï¼Œç§¯æåŠ¨æ‰‹ç¼–ç¨‹ï¼›
- é¼“åŠ±ä¸åŒå­¦äº¤æµï¼Œä½†ä¸èƒ½æŠ„è¢­æºç ï¼›
- èƒ½å®Œæˆå®éªŒè¯´æ˜æ–‡æ¡£çš„å„ä¸ªæ­¥éª¤å¹¶æ’°å†™æ­¤å®éªŒæŠ¥å‘Šï¼›
- èƒ½æ¼”ç¤ºå®éªŒè¿‡ç¨‹å¹¶é˜è¿°åŠŸèƒ½çš„ä¸»è¦ä»£ç æ¨¡å—ã€‚
- å®éªŒæŠ¥å‘Šè¯·çªå‡ºè‡ªå·±çš„**æƒ³æ³•**ã€**åšæ³•**ã€**å¿ƒå¾—ä½“ä¼š**ï¼›
- 

### ä¸‰ å®éªŒç¯å¢ƒ

- Vs Codeã€Githubã€Typoraï¼›
- ä¹¦ï¼š
- ç½‘ç«™ï¼š[Project 3: Ants Vs. SomeBees | CS61A-Spring2022](https://caiscoding.github.io/CS61A-Spring2022/projects/project3/README-zh_CN.html)
- ç¯å¢ƒé…ç½®



### å›› å®éªŒå†…å®¹

> æœ¬å®éªŒæ˜¯åœ¨å†™ä¸€ä¸ªæ¸¸æˆï¼Œèš‚èšå¤§æˆ˜èœœèœ‚ã€‚è¿™ä¸ªæ¸¸æˆçš„æ ¸å¿ƒç©æ³•ä¸æ¤ç‰©å¤§æˆ˜åƒµå°¸ååˆ†ç›¸ä¼¼ï¼Œå±äºç®€å•çš„æ–¹æ ¼å¡”é˜²æ¸¸æˆã€‚æ€»ä½“å®éªŒéƒ¨åˆ†è¢«åˆ†ä¸ºäº†4ä¸ªphase, 12+2 ä¸ªé—®é¢˜ï¼Œå› ä¸ºè¿™ä¸ªå¼•å¯¼å·²ç»ååˆ†å®Œå–„äº†ï¼Œæ‰€ä»¥ä¸‹é¢å°±æŒ‰ç…§ä»–æ‰€ç»™çš„å·¥ä½œæµæ¥å®Œæˆå®éªŒã€‚
>

#### Phase 1

- ##### é—®é¢˜0

  æµ‹è¯•ç»“æœï¼š

![image-20260111155433017](C:\Users\DELL\AppData\Roaming\Typora\typora-user-images\image-20260111155433017.png)

- ##### é—®é¢˜1

  åœ¨ `HarvesterAnt` å’Œ `ThrowerAnt` ä¸­é‡å†™ç±»å±æ€§ `food_cost` çš„å€¼ã€‚åœ¨ `HarvesterAnt` çš„ `action` æ–¹æ³•ä¸­ï¼Œä¸ºä¼ å…¥çš„ `gamestate` çš„ `food` åŠ ä¸€å³å¯
  
  <table class="ant">
    <tr>
      <td><b>ç±»</b></td>
      <td><b>é£Ÿç‰©æˆæœ¬</b></td>
      <td><b>åˆå§‹ç”Ÿå‘½å€¼</b></td>
    </tr>
    <tr>
      <td><img class="img-responsive center-block" src="assets/insects/ant_harvester.gif" /> <br> <code>HarvesterAnt</code></td>
      <td>2</td>
      <td>1</td>
    </tr>
    <tr>
      <td><img class="img-responsive center-block" src="assets/insects/ant_thrower.gif" /> <br> <code>ThrowerAnt</code></td>
      <td>3</td>
      <td>1</td>
    </td>
  </table>
  
  

```python
class HarvesterAnt(Ant):
    """HarvesterAnt produces 1 additional food per turn for the colony."""

    name = 'Harvester'
    implemented = True
    # OVERRIDE CLASS ATTRIBUTES HERE
    food_cost = 2

    def action(self, gamestate):
        """Produce 1 additional food for the colony.

        gamestate -- The GameState, used to access game state information.
        """
        # BEGIN Problem 1
        "*** YOUR CODE HERE ***"
        gamestate.food += 1
        # END Problem 1
```

- ##### é—®é¢˜2

  ä¸º `Place.__init__` æ·»åŠ è¿½è¸ª `Place` çš„å…¥å£ `entrance` çš„åŠŸèƒ½ã€‚å¦‚æœæˆ‘ä»¬å•çº¯å°† `entrance` ä¼ é€’ç»™æ„é€ å‡½æ•°ä¼šäº§ç”Ÿé—®é¢˜ï¼šæˆ‘ä»¬å¿…é¡»åœ¨åˆ›å»º `Place` ä¹‹å‰åŒæ—¶è·å¾—å‡ºå£å’Œå…¥å£ï¼Œè€Œç”±äºæˆ‘ä»¬æ˜¯æŒ‰ä¸€å®šçš„é¡ºåºåˆ›å»º `Place` çš„ï¼Œæˆ‘ä»¬æ— æ³•åŒæ—¶è·å¾—è¿™ä¸¤è€…ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°†æ”¹ç”¨ä»¥ä¸‹æ–¹å¼è¿½è¸ªå…¥å£ã€‚ `Place.__init__` åº”å½“é‡‡ç”¨ä»¥ä¸‹é€»è¾‘ï¼š

  - æ–°åˆ›å»ºçš„ `Place` æ€»æ˜¯ä»¥ `entrance` ä½œä¸º `None` å¼€å§‹ã€‚
  - å¦‚æœ `Place` æœ‰ä¸€ä¸ª `exit` ï¼Œé‚£ä¹ˆ `exit` çš„ `entrance` å°†è¢«è®¾ç½®ä¸ºè¯¥ `Place` ã€‚

  å› æ­¤ï¼Œæˆ‘ä»¬è¿½è¸ª `entrance` çš„é€»è¾‘æ˜¯ï¼Œæˆ‘ä»¬æŒ‰ç…§ä¸€å®šé¡ºåºåˆ›å»º `Place`ï¼ˆå¯èƒ½æ˜¯ä»æ²¡æœ‰ `exit` çš„ â€œç»ˆç‚¹â€å¼€å§‹ï¼‰ï¼Œå½“æœ‰ä¸€ä¸ª `Place` ä»¥ä¹‹å‰çš„ `Place` ä½œä¸º `exit`ã€æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ›´æ–°ä¹‹å‰çš„ `Place`ï¼Œè®¾ç½®å…¶å…¥å£ã€‚

  ![colony-drawing](D:\2025å¤§ä¸‰äººå·¥æ™ºèƒ½å®è®­\proj3-ants-main-qc\proj3-ants-main\ants\assets\colony-drawing.png)

  ```python
  class Place:
      """A Place holds insects and has an exit to another Place."""
      is_hive = False
  
      def __init__(self, name, exit=None):
          """Create a Place with the given NAME and EXIT.
  
          name -- A string; the name of this Place.
          exit -- The Place reached by exiting this Place (may be None).
          """
          self.name = name
          self.exit = exit
          self.bees = []        # A list of Bees
          self.ant = None       # An Ant
          self.entrance = None  # A Place
          # Phase 1: Add an entrance to the exit
          # BEGIN Problem 2
          "*** YOUR CODE HERE ***"
          if exit:
              exit.entrance = self
          # END Problem 2
  ```

- é—®é¢˜3

  é—®é¢˜å¯ä»¥æè¿°ä¸ºï¼šä» `ThrowerAnt` æ‰€åœ¨çš„ `Place` å¼€å§‹ï¼Œå¯»æ‰¾ä½äºå…¶å³è¾¹çš„ `Place` ä¸­åŒ…å«èœœèœ‚çš„æœ€è¿‘çš„ `Place`ï¼Œå¹¶è¿”å›åˆ—è¡¨ä¸­éšæœºçš„èœœèœ‚ã€‚

  æˆ‘ä½¿ç”¨é€’å½’æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

  é€’å½’æƒ…å†µæ˜¯ï¼šä» `Place` çš„ `entrance` å¼€å§‹å¯»æ‰¾æœ€è¿‘çš„èœœèœ‚ã€‚

  åŸºçº¿æ¡ä»¶æ˜¯ï¼š

  - å¦‚æœ `Place` çš„ `self.bees` éç©ºï¼Œåˆ™è¿”å›åˆ—è¡¨ä¸­éšæœºä¸€åªèœœèœ‚ã€‚
  - å¦‚æœ `Place` çš„ `self.bees` ä¸ºç©ºå¹¶ä¸”è¯¥ `Place` çš„ `entrance` æ˜¯ `Hive`ï¼Œåˆ™è¿”å› `None`
  - å¦‚æœ `Place` çš„ `self.bees` ä¸ºç©ºå¹¶ä¸”è¯¥ `Place` çš„ `entrance` ä¸æ˜¯ `Hive`ï¼Œåˆ™åœ¨è¯¥ `Place` çš„ `entrance` ä¸Šå¯»æ‰¾æœ€è¿‘çš„èœœèœ‚ã€‚

  ```python
  def nearest_bee(self):
      """Return the nearest Bee in a Place that is not the HIVE, connected to
      the ThrowerAnt's Place by following entrances.
  
      This method returns None if there is no such Bee (or none in range).
      """
      # BEGIN Problem 3 and 4
      def find_nearest_bee(place):
          if len(place.bees) > 0:
              return random_bee(place.bees)
          elif (len(place.bees) == 0) and (place.entrance.is_hive):
              return None
          else:
              return find_nearest_bee(place.entrance)
  
      return find_nearest_bee(self.place)
      # END Problem 3 and 4
  ```

#### Phase 2

- é—®é¢˜4

  æˆ‘ä»¬è¦å®ç°ä¸¤ä¸ªæ–°å‹æŠ•æ·èš‚èšï¼š

  - `LongThrower` åªèƒ½ `throw_at` åœ¨è‡³å°‘ç»è¿‡ 5 æ¬¡ `entrance` è½¬æ¢åæ‰èƒ½æ‰¾åˆ°çš„ `Bee` ã€‚
  - `ShortThrower` æœ€å¤šåªèƒ½ `throw_at` æ²¿ç€ 3 æ¬¡ `entrance` è½¬æ¢åæ‰¾åˆ°çš„ `Bee` è¿›è¡Œ ã€‚å®ƒæ— æ³•æ”»å‡»å‰æ–¹è¶…è¿‡ 3 ä¸ª `Place` è·ç¦»çš„èœœèœ‚ã€‚

  <table class="ant">
    <tr>
      <td><b>ç±»</b></td>
      <td><b>é£Ÿç‰©æˆæœ¬</b></td>
      <td><b>åˆå§‹ç”Ÿå‘½å€¼</b></td>
    </tr>
    <tr>
      <td><img class="img-responsive center-block" src="assets/insects/ant_shortthrower.gif" /> <br>
        <code>ShortThrower</code></td>
      <td>2</td>
      <td>1</td>
    </tr>
    <tr>
      <td><img class="img-responsive center-block" src="assets/insects/ant_longthrower.gif" /> <br> <code>LongThrower</code></td>
      <td>2</td>
      <td>1</td>
    </tr>
  </table>

  ä¿®æ”¹ `nearest_bee` æ–¹æ³•ä»¥å¼•ç”¨ `lower_bound` å’Œ `upper_bound` å±æ€§ï¼Œå¹¶ä»…åœ¨èŒƒå›´å†…æ—¶è¿”å›ä¸€åªèœœèœ‚ã€‚ç¡®ä¿åœ¨ `ThrowerAnt` ç±»ä¸­ä¸ºè¿™äº› `lower_bound` å’Œ `upper_bound` å±æ€§èµ‹äºˆé€‚å½“çš„å€¼ï¼Œä»¥ä¿æŒ `ThrowerAnt` çš„è¡Œä¸ºä¸å˜ã€‚ç„¶åï¼Œå®ç°å­ç±» `LongThrower` å’Œ `ShortThrower` ï¼Œå¹¶å¯¹å…¶èŒƒå›´è¿›è¡Œé€‚å½“çš„çº¦æŸã€‚

  `lower_bound` å’Œ `upper_bound` åº”æ ‡è®°ä¸€ä¸ªåŒ…å«ç«¯ç‚¹çš„èŒƒå›´ã€‚

  æƒ³æ³•æ˜¯ï¼Œå¼•å…¥ä¸€ä¸ªæ–°å˜é‡ `num_transition` è®°å½• `Place` çš„è½¬æ¢æ¬¡æ•°ï¼Œä¹‹åï¼Œæ·»åŠ ä¸€ä¸ªåˆ¤æ–­ `num_transition` æ˜¯å¦ä½äºå°„ç¨‹åŒºé—´å†…çš„æ¡ä»¶ã€‚`lower_bound` å’Œ `upper_bound` éœ€è¦ä½¿ç”¨å®ä¾‹å±æ€§ï¼Œå³å‰é¢åŠ ä¸Š `self` ä»è€Œåæ˜ å…·ä½“ç±»å‹çš„ç‰¹å®šå€¼ã€‚

  å¯¹äº `ThrowerAnt` ç±»ä¸­ `lower_bound` å’Œ `upper_bound` å±æ€§çš„å€¼ï¼Œåˆ†åˆ«èµ‹äºˆ 0 å’Œ `float('inf)`ï¼Œä»è€Œä¸å½±å“ `ThrowerAnt` çš„è¡Œä¸ºã€‚å¯¹äº `LongThrower` å’Œ `ShortThrower`ï¼Œåªéœ€è¦åˆ†åˆ«é‡å†™ `lower_bound` å’Œ `upper_bound` å³å¯ã€‚

  ```python
  lower_bound = 0
  upper_bound = float('inf')
  
  def nearest_bee(self):
      """Return the nearest Bee in a Place (that is not the hive) connected to
      the ThrowerAnt's Place by following entrances.
  
      This method returns None if there is no such Bee (or none in range).
      """
      # BEGIN Problem 3 and 4
      current_place = self.place
      num_transition = 0
      while not current_place.is_hive:
          if self.lower_bound <= num_transition <= self.upper_bound:
              if len(current_place.bees) > 0:
                  return random_bee(current_place.bees)
          current_place = current_place.entrance
          num_transition += 1
      return None
      # END Problem 3 and 4
  ```

- é—®é¢˜5

  å®ç° `FireAnt` ï¼Œå®ƒåœ¨å—åˆ°ä¼¤å®³æ—¶ä¼šé€ æˆä¼¤å®³ã€‚å…·ä½“æ¥è¯´ï¼Œå¦‚æœå®ƒå—åˆ° `amount` ç‚¹ç”Ÿå‘½å€¼çš„ä¼¤å®³ï¼Œå°±ä¼šå¯¹æ‰€åœ¨ä½ç½®çš„æ‰€æœ‰èœœèœ‚é€ æˆ `amount` ç‚¹ä¼¤å®³ï¼ˆè¿™ç§°ä¸ºåå°„ä¼¤å®³ï¼‰ã€‚å¦‚æœå®ƒæ­»äº¡ï¼Œè¿˜ä¼šæ ¹æ®å…¶ `damage` å±æ€§é€ æˆé¢å¤–ä¼¤å®³ï¼Œè¯¥å±æ€§åœ¨ `FireAnt` ç±»ä¸­å®šä¹‰çš„é»˜è®¤å€¼ä¸º `3`ã€‚

  <table class="ant">
  <tr>
      <td><b>ç±»</b></td>
    <td><b>é£Ÿç‰©æˆæœ¬</b></td>
      <td><b>åˆå§‹ç”Ÿå‘½å€¼</b></td>
    </tr>
  <tr>
      <td><img class="img-responsive center-block" src="assets/insects/ant_fire.gif" /> <br> <code>FireAnt</code></td>
    <td>5</td>
      <td>3</td>
  </td>
  </table>

  è¦å®ç°è¿™ä¸€ç‚¹ï¼Œéœ€è¦åœ¨ `FireAnt` ä¸­ é‡å†™ `Insect` çš„ `reduce_health` æ–¹æ³•ã€‚
  
  ä½ çš„æ–¹æ³•è¿˜éœ€è¦åŒ…å«åå°„ä¼¤å®³çš„é€»è¾‘ï¼š
  
  - ç¡®å®šåå°„ä¼¤å®³é‡ï¼šä»èš‚èšå—åˆ°çš„ `amount` ä¼¤å®³å¼€å§‹è®¡ç®—ï¼Œå¦‚æœèš‚èšçš„ç”Ÿå‘½å€¼é™è‡³ 0 æˆ–ä»¥ä¸‹ï¼Œåˆ™é¢å¤–å¢åŠ  `damage` ã€‚
  - å¯¹äºè¯¥åœ°ç‚¹ä¸­çš„æ¯åªèœœèœ‚ï¼Œé€šè¿‡è°ƒç”¨é€‚å½“çš„ `reduce_health` æ–¹æ³•ï¼Œç”¨æ€»ä¼¤å®³é‡å¯¹å®ƒä»¬é€ æˆä¼¤å®³ã€‚
  
  é‡è¦æç¤ºï¼šè¯·è®°ä½ï¼Œå½“ä»»ä½• `Ant` çš„ç”Ÿå‘½å€¼é™ä¸ºé›¶æ—¶ï¼Œå®ƒå°†è¢«ä»å…¶ `place` ä¸­ç§»é™¤ï¼Œå› æ­¤åœ¨ `reduce_health` ä¸­è¦ç‰¹åˆ«æ³¨æ„é€»è¾‘é¡ºåºã€‚
  
  é‡è¦æç¤ºï¼šå¯¹èœœèœ‚é€ æˆä¼¤å®³å¯èƒ½å¯¼è‡´å…¶è¢«ç§»å‡ºå½“å‰ä½ç½®ï¼›å½“æ˜†è™«æ­»äº¡æ—¶ï¼Œå®ƒä¼šè¢«ç§»å‡ºå½“å‰æ‰€åœ¨ä½ç½®ã€‚å¦‚æœåœ¨éå†åˆ—è¡¨çš„åŒæ—¶ä¿®æ”¹è¯¥åˆ—è¡¨çš„å†…å®¹ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ— æ³•è®¿é—®æ‰€æœ‰å…ƒç´ ã€‚ä¸ºé¿å…è¿™ç§æƒ…å†µï¼Œå¯ä»¥åˆ›å»ºåˆ—è¡¨çš„å‰¯æœ¬ã€‚æ‚¨æ—¢å¯ä»¥ä½¿ç”¨åˆ—è¡¨åˆ‡ç‰‡ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å†…ç½®çš„ `list` å‡½æ•°æ¥ç¡®ä¿åŸå§‹åˆ—è¡¨ä¸å—å½±å“ã€‚
  
  å› æ­¤ï¼Œæˆ‘çš„å®ç°é€»è¾‘æ˜¯ï¼šé¦–å…ˆè·å–èœœèœ‚åˆ—è¡¨çš„å‰¯æœ¬ï¼Œæ£€æŸ¥ä¼¤å®³æ˜¯å¦è‡´å‘½ï¼Œä¹‹åå‡å°‘èš‚èšçš„ç”Ÿå‘½å€¼ï¼Œå†æ ¹æ®æ˜¯å¦è‡´å‘½è®¡ç®—æ€»ä¼¤å®³ï¼Œä¹‹åå¯¹è¯¥ä½ç½®çš„æ‰€æœ‰èœœèœ‚é€ æˆæ€»ä¼¤å®³ã€‚
  
  ```python
  def reduce_health(self, amount):
      """Reduce health by AMOUNT, and remove the FireAnt from its place if it
      has no health remaining.
  
      Make sure to reduce the health of each bee in the current place, and apply
      the additional damage if the fire ant dies.
      """
      # BEGIN Problem 5
      "*** YOUR CODE HERE ***"
      bees_in_place = self.place.bees[:]
  
      is_fatal = amount >= self.health
  
      super().reduce_health(amount)
  
      total_damage = amount
      if is_fatal:
          total_damage += self.damage
  
      for bee in bees_in_place:
          bee.reduce_health(total_damage)
  
       # END Problem 5
  ```

#### Phase 3

- é—®é¢˜6

  å®ç° `WallAnt` ï¼Œè¿™æ˜¯ä¸€ç§æ¯å›åˆä¸é‡‡å–ä»»ä½•è¡ŒåŠ¨çš„èš‚èšã€‚ `WallAnt` ä¹‹æ‰€ä»¥æœ‰ç”¨ï¼Œæ˜¯å› ä¸ºå®ƒå…·æœ‰è¾ƒé«˜çš„ `health` å€¼ã€‚

  æ ¹æ® `WallAnt` çš„ç‰¹ç‚¹ï¼Œæˆ‘ä»¬åªéœ€è¦é‡å†™ `name`ã€`food_cost`ã€`implemented` è¿™ä¸‰ä¸ªç±»å±æ€§ï¼Œå¹¶é‡å†™ `__init__` æ–¹æ³•ï¼Œä½¿ç”¨ä¸åŒçš„ `health` å€¼è¿›è¡Œåˆå§‹åŒ–ã€‚

  <table class="ant">
    <tr>
      <td><b>ç±»</b></td>
      <td><b>é£Ÿç‰©æˆæœ¬</b></td>
      <td><b>åˆå§‹ç”Ÿå‘½å€¼</b></td>
    </tr>
    <tr>
      <td><img class="img-responsive center-block" src="assets/insects/ant_wall.gif" /> <br> <code>WallAnt</code></td>
      <td>4</td>
      <td>4</td>
    </td>
  </table>

  ```python
  class WallAnt(Ant):
      name = 'Wall'
      food_cost = 4
      implemented = True
  
      def __init__(self, health=4):
          super().__init__(health)
          
  ```

- é—®é¢˜7

  å®ç° `HungryAnt` ï¼Œå®ƒä¼šä»å…¶ `place` ä¸­éšæœºé€‰æ‹©ä¸€åª `Bee` ï¼Œå¹¶å¯¹å…¶é€ æˆç­‰åŒäºè¯¥ `Bee` ç”Ÿå‘½å€¼çš„ä¼¤å®³ï¼Œå°†å…¶æ•´ä¸ªåä¸‹ã€‚åé£Ÿ `Bee` åï¼Œ `HungryAnt` éœ€è¦èŠ±è´¹ 3 ä¸ªå›åˆè¿›è¡Œå’€åš¼ï¼Œä¹‹åæ‰èƒ½å†æ¬¡è¿›é£Ÿã€‚å½“ `HungryAnt` æ­£åœ¨å’€åš¼æ—¶ï¼Œå®ƒæ— æ³•åé£Ÿï¼ˆæ”»å‡»ï¼‰ä»»ä½• `Bee` ã€‚å¦‚æœå½“å‰ä½ç½®æ²¡æœ‰å¯åé£Ÿçš„èœœèœ‚ï¼Œ `HungryAnt` å°†ä¸ä¼šé‡‡å–ä»»ä½•è¡ŒåŠ¨ã€‚

  `HungryAnt` ç±»æ˜¯ `action` æ¯”è¾ƒç‰¹æ®Šçš„ `Ant` ç±»ï¼Œå› æ­¤æˆ‘ä»¬ç»§æ‰¿ `Ant` ç±»ã€‚æˆ‘ä»¬ä¸º `HungryAnt` æ·»åŠ ä¸€ä¸ª `chew_cooldown` ç±»å±æ€§ï¼Œç”¨äºå­˜å‚¨ `HungryAnt` å’€åš¼æ‰€éœ€çš„å›åˆæ•°ï¼Œåœ¨å„ä¸ªå®ä¾‹ä¸­å…±äº«ã€‚è€Œå„ä¸ªå®ä¾‹å…·æœ‰è‡ªå·±çš„å®ä¾‹å±æ€§ `cooldown` ï¼Œç”¨äºè®°å½•å‰©ä½™å’€åš¼å›åˆæ•°ã€‚

  å¯¹äº `HungryAnt` çš„ `action` æ–¹æ³•ï¼šé¦–å…ˆæ£€æŸ¥å®ƒæ˜¯å¦åœ¨å’€åš¼ï¼›å¦‚æœæ˜¯ï¼Œåˆ™å‡å°‘å…¶ `cooldown` ã€‚å¦åˆ™ï¼Œå¦‚æœå…¶ `place` ä¸­æœ‰èœœèœ‚ï¼Œåˆ™éšæœºé€‰å–ä¸€åªåƒæ‰ï¼Œå¹¶è®¾ç½® `cooldown`ã€‚

  ```python
  # BEGIN Problem 7
  class HungryAnt(Ant):
      name = 'Hungry'
      food_cost = 4
      implemented = True
      chew_cooldown = 3
  
      def __init__(self, health=1):
          super().__init__(health)
          self.cooldown = 0
  
      def action(self, gamestate):
          if self.cooldown > 0:
              self.cooldown -= 1
          else:
              if self.place.bees:
                  bee = random_bee(self.place.bees)
                  bee.reduce_health(bee.health)
                  self.cooldown = HungryAnt.chew_cooldown
  # END Problem 7
  ```

- é—®é¢˜8

  æˆ‘ä»¬å¸Œæœ›å®ç°å¯ä»¥å®¹çº³å¹¶ä¿æŠ¤å¦ä¸€åªèš‚èšçš„èš‚èšç±»å‹ã€‚ç”±äºè¯¥ç±»å‹è¿˜å¯èƒ½æœ‰æ›´ç‰¹åŒ–çš„å­ç±»ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ª `ContainerAnt` ä½œä¸ºçˆ¶ç±»ã€‚ä¹‹åï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ªå­ç±» `BodyguardAnt`ã€‚

  æˆ‘ä»¬é€šè¿‡ç±»å±æ€§ `is_container` æ¥è¯†åˆ«æ˜¯å¦æ˜¯ `ContainerAnt`ï¼Œé€šè¿‡å®ä¾‹å±æ€§ `ant_contained` å­˜å‚¨è¢«åŒ…å«çš„èš‚èšã€‚

  æˆ‘ä»¬éœ€è¦å®ç°ï¼š

  - `store_ant` æ–¹æ³•ï¼šå°† `ContainerAnt` çš„ `ant_contained` å®ä¾‹å±æ€§è®¾ç½®ä¸ºä¼ å…¥çš„ `ant` å‚æ•°ã€‚
  - `ContainerAnt` çš„ `action` æ–¹æ³•ï¼šå¦‚æœæˆ‘ä»¬çš„ `ContainerAnt` å½“å‰åŒ…å«èš‚èšï¼Œå°±ä¼šæ‰§è¡Œ `ant_contained` çš„åŠ¨ä½œï¼Œè€Œ `ContainerAnt` æœ¬èº«æ²¡æœ‰åŠ¨ä½œã€‚
  - `can_contain` æ–¹æ³•ï¼šåˆ¤æ–­æ˜¯å¦å¯ä»¥åŒ…å«å¦ä¸€åªèš‚èšï¼Œéœ€è¦æ»¡è¶³è¿™ä¸ª `ContainerAnt` è¿˜æ²¡æœ‰æ”¾ç½®å…¶ä»–èš‚èšå¹¶ä¸”å¦ä¸€åªèš‚èšä¸æ˜¯å®¹å™¨ã€‚

  æ³¨æ„ï¼Œæˆ‘ä»¬éœ€è¦å‘ `self.ant_contained.action` ä¼ å…¥ `gamestate` è€Œä¸æ˜¯ `self.ant_contained`ï¼Œå› ä¸º `action` çš„å‡½æ•°ç­¾åä¸­è§„å®šäº†éœ€è¦ `gamestate`ï¼ˆ`HarvesterAnt` éœ€è¦ï¼‰ï¼Œè€Œè¿™é‡Œ `action` ä½œä¸ºç»‘å®šæ–¹æ³•è°ƒç”¨ï¼Œå…¶ç¬¬ä¸€ä¸ªå‚æ•° `self` ä¼šè¢«éšå¼åœ°ä¼ é€’ï¼Œå¦‚æœ `self.ant_contained.action(self.ant_contained)`ï¼Œåˆ™ `self.ant_contained` ä¼šè¢«ä¼ é€’ç»™ `gamestate` å‚æ•°ï¼Œä»è€Œå‘ç”Ÿé”™è¯¯ã€‚

  ```python
  class ContainerAnt(Ant):
      """
      ContainerAnt can share a space with other ants by containing them.
      """
      is_container = True
  
      def __init__(self, health):
          super().__init__(health)
          self.ant_contained = None
  
      def can_contain(self, other):
          # BEGIN Problem 8a
          "*** YOUR CODE HERE ***"
          return (self.ant_contained is None) and (not other.is_container)
          # END Problem 8a
  
      def store_ant(self, ant):
          # BEGIN Problem 8a
          "*** YOUR CODE HERE ***"
          self.ant_contained = ant
          # END Problem 8a
  
      def remove_ant(self, ant):
          if self.ant_contained is not ant:
              assert False, "{} does not contain {}".format(self, ant)
          self.ant_contained = None
  
      def remove_from(self, place):
          # Special handling for container ants
          if place.ant is self:
              # Container was removed. Contained ant should remain in the game
              place.ant = place.ant.ant_contained
              Insect.remove_from(self, place)
          else:
              # default to normal behavior
              Ant.remove_from(self, place)
  
      def action(self, gamestate):
          # BEGIN Problem 8a
          "*** YOUR CODE HERE ***"
          if self.ant_contained:
              self.ant_contained.action(gamestate)
          # END Problem 8a
  ```

  ç”±äº `ContainerAnt` çš„ç‰¹æ®Šæ€§ï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹å°†èš‚èšæ·»åŠ åˆ° `Place` çš„æ–¹æ³• `Ant.add_to`ï¼Œå…è®¸å®¹å™¨åŠå…¶åŒ…å«çš„èš‚èšæ ¹æ®ç‰¹å®šè§„åˆ™å æ®åŒä¸€ä½ç½®ã€‚

  é¢˜ç›®ç»™å‡ºçš„è§„åˆ™å¯ä»¥æ€»ç»“ä¸ºï¼Œåœ¨æ»¡è¶³ä»¥ä¸‹æ¡ä»¶æ—¶ï¼Œè¿›è¡Œç›¸åº”çš„æ·»åŠ ï¼Œå¦åˆ™æŠ›å‡ºé”™è¯¯ï¼š

  - åŸæœ¬å æ®ä½ç½®çš„èš‚èšæ˜¯å®¹å™¨ï¼Œå¹¶ä¸”èƒ½å¤Ÿå®¹çº³è¢«æ·»åŠ çš„èš‚èš
  - æ·»åŠ çš„èš‚èšæ˜¯å®¹å™¨ï¼Œå¹¶ä¸”èƒ½å¤Ÿå®¹çº³åŸæœ¬åœ¨è¯¥ä½ç½®çš„èš‚èš

  ```python
  def add_to(self, place):
      if place.ant is None:
          place.ant = self
      else:
          # BEGIN Problem 8b
          if (place.ant.is_container) and (place.ant.can_contain(self)):
              place.ant.store_ant(self)
          elif (self.is_container) and (self.can_contain(place.ant)):
              self.store_ant(place.ant)
              place.ant = self
          else:
              assert place.ant is None, 'Too many ants in {0}'.format(place)
          # END Problem 8b
      Insect.add_to(self, place)
  ```

  åªéœ€è¦æ ¹æ®é¢˜ç›®çš„å‚æ•°é‡å†™ `__init__` å³å¯ã€‚

  ```python
  class BodyguardAnt(ContainerAnt):
      """BodyguardAnt provides protection to other Ants."""
  
      name = 'Bodyguard'
      food_cost = 4
      # OVERRIDE CLASS ATTRIBUTES HERE
      # BEGIN Problem 8c
      implemented = True   # Change to True to view in the GUI
  
      def __init__(self, health=2):
          super().__init__(health)
      # END Problem 8c
  ```

- é—®é¢˜9

  `TankAnt` æ˜¯ä¸€ç§ `ContainerAnt` ï¼Œæ—¢èƒ½åŸåœ°ä¿æŠ¤èš‚èšï¼Œåˆèƒ½æ¯å›åˆå¯¹åŒæ ¼æ‰€æœ‰èœœèœ‚é€ æˆ 1 ç‚¹ä¼¤å®³ã€‚å’Œæ‰€æœ‰ `ContainerAnt` ä¸€æ ·ï¼Œ `TankAnt` èƒ½è®©å…¶å†…éƒ¨çš„èš‚èšæ¯å›åˆæ‰§è¡Œè¡ŒåŠ¨ã€‚

  æˆ‘ä»¬éœ€è¦ä» `TankAnt` çš„çˆ¶ç±»ä¸­é‡å†™çš„æ–¹æ³•åªæœ‰ `__init__` å’Œ `action` ã€‚

  æˆ‘çš„é€»è¾‘æ˜¯ï¼Œé¦–å…ˆåƒ `FireAnt` ä¸€æ ·ï¼Œè·å–å½“å‰ä½ç½®çš„èœœèœ‚ï¼Œéå†ä»–ä»¬ï¼Œé€ æˆä¼¤å®³ï¼Œä¹‹åï¼Œè°ƒç”¨çˆ¶ç±»çš„ `action`ï¼Œè®©è¢«åŒ…å«çš„èš‚èšæ‰§è¡ŒåŠ¨ä½œã€‚

  ```python
  # BEGIN Problem 9
  # The TankAnt class
  class TankAnt(ContainerAnt):
      name = 'Tank'
      damage = 1
      food_cost = 6
      implemented = True
  
      def __init__(self, health=2):
          super().__init__(health)
  
      def action(self, gamestate):
          bees_in_place = self.place.bees[:]
          for b in bees_in_place:
              b.reduce_health(self.damage)
          super().action(gamestate)
  # END Problem 9
  ```

#### Phase 4

- é—®é¢˜10

  æˆ‘ä»¬æ¥åˆ›å»ºä¸€ç§æ–°çš„ `Place` ï¼Œå«åš `Water` ã€‚

  åªæœ‰é˜²æ°´çš„æ˜†è™«æ‰èƒ½è¢«æ”¾ç½®åœ¨ `Water` ä¸­ã€‚ä¸ºäº†åˆ¤æ–­æŸä¸ª `Insect` æ˜¯å¦é˜²æ°´ï¼Œéœ€è¦åœ¨ `Insect` ç±»ä¸­æ·»åŠ ä¸€ä¸ªåä¸º `is_waterproof` çš„æ–°ç±»å±æ€§ï¼Œå¹¶å°†å…¶è®¾ä¸º `False` ã€‚ç”±äºèœœèœ‚ä¼šé£ï¼Œå®ƒä»¬çš„ `is_waterproof` å±æ€§å€¼ä¸º `True` ï¼Œè¿™ä¼šè¦†ç›–ç»§æ‰¿æ¥çš„å€¼ã€‚

  ç°åœ¨ï¼Œä¸º `Water` å®ç° `add_insect` æ–¹æ³•ã€‚é¦–å…ˆï¼Œæ— è®ºæ˜†è™«æ˜¯å¦é˜²æ°´ï¼Œéƒ½å°†å…¶æ·»åŠ åˆ°åœ°ç‚¹ä¸­ã€‚ç„¶åï¼Œå¦‚æœæ˜†è™«ä¸é˜²æ°´ï¼Œå°†å…¶ç”Ÿå‘½å€¼é™è‡³ 0ã€‚

  é¦–å…ˆåœ¨ `Insect` ä¸­æ·»åŠ ä¸€ä¸ªåä¸º `is_waterproof` çš„æ–°ç±»å±æ€§ï¼Œå¹¶å°†å…¶è®¾ä¸º `False` ã€‚ä¹‹åï¼Œå¯¹äº `Water` çš„ `add_insect` æ–¹æ³•ï¼Œé¦–å…ˆè°ƒç”¨åŸºç±»å·²æœ‰çš„ `add_insect`ï¼Œä¹‹åæ ¹æ®æ˜†è™«æ˜¯å¦é˜²æ°´æ¥é™ä½æ˜†è™«çš„ç”Ÿå‘½å€¼ã€‚

  ```python
  class Water(Place):
      """Water is a place that can only hold waterproof insects."""
  
      def add_insect(self, insect):
          """Add an Insect to this place. If the insect is not waterproof, reduce
          its health to 0."""
          # BEGIN Problem 10
          super().add_insect(insect)
          if not insect.is_waterproof:
              insect.reduce_health(insect.health)
          # END Problem 10
  ```

- é—®é¢˜11

  `ScubaThrower` æ˜¯ `ThrowerAnt` çš„ä¸€ä¸ªå­ç±»ï¼Œæˆæœ¬æ›´é«˜ä¸”é˜²æ°´ï¼Œä½†å…¶ä»–æ–¹é¢ä¸åŸºç±»ç›¸åŒã€‚ `ScubaThrower` æ”¾ç½®åœ¨ `Water` æ—¶ä¸åº”æŸå¤±ç”Ÿå‘½å€¼ã€‚

  å› æ­¤ï¼Œæˆ‘ä»¬åªéœ€è¦é‡å†™ `name`ã€`is_waterproof`ã€`food_cost`ã€‚

- é—®é¢˜12

  å®ç° `QueenAnt` ã€‚ `QueenAnt` æ˜¯ä¸€ç§ `ThrowerAnt` ï¼Œå¥¹é€šè¿‡è‡ªå·±çš„å‹‡æ•¢æ¿€åŠ±åŒä¼´ã€‚é™¤äº†æ‰§è¡Œæ ‡å‡†çš„ `ThrowerAnt` åŠ¨ä½œä¹‹å¤–ï¼Œæ¯æ¬¡ `QueenAnt` æ‰§è¡ŒåŠ¨ä½œæ—¶ï¼Œå¥¹ä¼šè®©å¥¹èº«åæ‰€æœ‰èš‚èšçš„ä¼¤å®³ç¿»å€ã€‚ä¸è¿‡ï¼Œä¸€æ—¦æŸåªèš‚èšçš„ä¼¤å®³å·²ç»è¢«ç¿»å€è¿‡äº†ï¼Œå°±ä¸èƒ½å†è¢«ç¿»å€ã€‚ï¼ˆæç¤ºï¼šç”¨å®ä¾‹å±æ€§æ¥è®°å½•èš‚èšæ˜¯å¦å·²è¢«å¼ºåŒ–è¿‡ï¼‰ã€‚

  å¦‚æœèœ‚ç‹çš„ç”Ÿå‘½å€¼è¢«å‡å°‘åˆ° 0ï¼Œèš‚èšä¸€æ–¹å°±è¾“äº†ã€‚ä½ éœ€è¦åœ¨ `QueenAnt` ä¸­é‡å†™ `Insect.reduce_health` ï¼Œå¹¶åœ¨è¿™ç§æƒ…å†µä¸‹è°ƒç”¨ `ants_lose()` ï¼Œä»¥æ­¤å‘æ¨¡æ‹Ÿå™¨è¡¨æ˜æ¸¸æˆå·²ç»ç»“æŸã€‚ï¼ˆå¦‚æœä»»ä½•ä¸€åªèœœèœ‚åˆ°è¾¾äº†éš§é“çš„ç»ˆç‚¹ï¼Œèš‚èšä¹Ÿä¼šè¾“æ‰æ¸¸æˆã€‚ï¼‰

  å¯¹äºåŠ å€èš‚èšçš„ä¼¤å®³ï¼Œæˆ‘å¸Œæœ›åœ¨ `QueenAnt` ä¸­è¿›è¡Œéå†èº«åçš„èš‚èšï¼Œå¹¶è°ƒç”¨ `double` ï¼Œå¯¹äºå·²ç»è¢«åŠ å€ä»¥åŠå®¹å™¨èš‚èšçš„å¤„ç†åœ¨ `Ant` ç±»ä¸­çš„ `double` ä¸­å®Œæˆã€‚

  ç”±äºâ€œæ˜¯å¦è¢«å¼ºåŒ–è¿‡â€è¿™ä¸ªå±æ€§å¹¶ä¸æ˜¯æ‰€æœ‰åŒç±»å‹èš‚èšå…±äº«çš„ï¼ˆä¾‹å¦‚ `food_cost` ï¼‰ï¼Œæ¯ä¸ªå¯¹è±¡çš„â€œæ˜¯å¦è¢«å¼ºåŒ–è¿‡â€å±æ€§éƒ½å¯èƒ½æ˜¯ä¸åŒçš„ï¼Œå› æ­¤ï¼Œæˆ‘è®¾ç½®äº†ä¸€ä¸ªå®ä¾‹å±æ€§ `doubled` ç”¨æ¥è®°å½•ã€‚

  å¯¹äº `double`ï¼Œé¦–å…ˆç›´æ¥æ“ä½œ `self`ï¼Œä¹‹åï¼Œå¤„ç†è¢«åŒ…å«çš„èš‚èšã€‚

  QueenAnt çš„ `reduce_health` æ–¹æ³•è¿˜éœ€è¦è°ƒç”¨ `ants_lose` ï¼Œè¿™æ˜¯å¯¹çˆ¶ç±» `reduce_health` æ–¹æ³•çš„é¢å¤–ä»»åŠ¡ã€‚æˆ‘ä»¬æ€æ ·æ‰èƒ½ç¡®ä¿ä»ç„¶æ‰§è¡Œçˆ¶ç±»æ–¹æ³•ä¸­çš„æ‰€æœ‰æ“ä½œï¼ŒåŒæ—¶åˆä¸é‡å¤ç¼–å†™ä»£ç å‘¢ï¼Ÿ

  æˆ‘ä¾ç„¶é‡‡å– `FireAnt` ç›¸ä¼¼çš„æ¨¡å¼ï¼Œå…ˆåˆ¤æ–­ä¼¤å®³æ˜¯å¦è‡´æ­»ï¼Œå†å‡å°‘ç”Ÿå‘½å€¼ï¼Œå¦‚æœè‡´æ­»åˆ™è°ƒç”¨ `ants_lose`ã€‚

### äº” å®éªŒå¿ƒå¾—

> æ€»ç»“è‡ªå·±çš„å®ç°è¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ„Ÿå—å’Œå¿ƒå¾—ï¼Œçªå‡ºä¸€åˆ†è€•è€˜ä¸€åˆ†æ”¶è·ã€‚

çªå‡ºè‡ªå·±çš„å¿ƒå¾—ä½“ä¼šï¼Œè¯·è‡ªç”±æè¿°ã€‚











å…³äºå›¾åºŠçš„ä½¿ç”¨è¯´æ˜ï¼š

å»ºè®®å°†å›¾ç‰‡ä¸Šä¼ åˆ°æŸä¸ªå›¾åºŠæœåŠ¡å™¨ï¼Œå…è´¹çš„å¦‚ï¼šSM.MSç­‰ï¼Œä»˜è´¹çš„å¯ä»¥ä½¿ç”¨é˜¿é‡Œäº‘ç­‰ ï¼Œè¯·è‡ªè¡Œæœç´¢æˆ–è€…å’¨è¯¢åŒå­¦å›¾åºŠçš„è®¾ç½®æ–¹æ³•ï¼›

æˆ–è€…ä¿å­˜ä¸ºæœ¬åœ°å›¾ç‰‡ï¼Œåœ¨Typoraä¸­æ’å…¥å›¾ç‰‡ï¼Œæ”¾åœ¨æœ¬åœ°æ–‡ä»¶å¤¹å†…ï¼Œä¸€åŒæ‹·è´å±•ç¤ºã€‚

https://zhuanlan.zhihu.com/p/344941041





